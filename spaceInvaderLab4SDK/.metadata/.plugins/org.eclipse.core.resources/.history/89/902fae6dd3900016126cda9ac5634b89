/*
 * mother_ship.c
 *
 *  Created on: Oct 12, 2016
 *      Author: superman
 */

#include "mother_ship.h"
#include "util.h"

#define packword16(b15,b14,b13,b12,b11,b10,b9,b8,b7,b6,b5,b4,b3,b2,b1,b0)  \
((b15<<15)|(b14<<14)|(b13 << 13) | (b12 << 12) | (b11 << 11) | (b10 << 10) | \
 (b9  << 9 ) | (b8  << 8 ) | (b7  << 7 ) | (b6  << 6 ) | (b5  << 5 ) | \
 (b4  << 4 ) | (b3  << 3 ) | (b2  << 2 ) | (b1  << 1 ) | (b0  << 0 ) )
static const uint32_t MOTHER_SHIP_16x7[] ={
packword16(0,0,0,0,0,1,1,1,1,1,1,0,0,0,0,0),
packword16(0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0),
packword16(0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,0),
packword16(0,1,1,0,1,1,0,1,1,0,1,1,0,1,1,0),
packword16(1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1),
packword16(0,0,1,1,1,0,0,1,1,0,0,1,1,1,0,0),
packword16(0,0,0,1,0,0,0,0,0,0,0,0,1,0,0,0)};

#define MOTHER_SHIP_ROW 25	// Where the mother ship spawns at
#define MOTHER_SHIP_HEIGHT 7
#define MOTHER_SHIP_WIDTH 16
#define MOTHER_SHIP_MOVE_SPEED 4
#define SHOCKING_PINK 0xFF6FFF
#define MOTHER_SHIP_COLOR SHOCKING_PINK
#define BLACK 0xFFFFFF

struct{
	uint32_t row;
	uint32_t col;
	bool alive;
}mother_ship;

uint32_t * frame;

// ----------------------------------
void mother_ship_draw(uint32_t row, uint32_t col, uint32_t color);
// ----------------------------------




// Initializes the mother ship
void mother_ship_init(uint32_t * framePointer){
	frame = framePointer;
	mother_ship.row = MOTHER_SHIP_ROW;
	mother_ship.alive = false;
	mother_ship.col = 0;
}


// Spawns a mother ship
void mother_ship_spawn(){

}

// Moves the mother ship right
void mother_ship_move(){
	if(!mother_ship.alive){
		return;
	}
	mother_ship_draw(mother_ship.row, mother_ship.col, BLACK);
	mother_ship.col += MOTHER_SHIP_MOVE_SPEED;
	mother_ship_draw(mother_ship.row, mother_ship.col, MOTHER_SHIP_COLOR);
}

// Detects a bullet collision on the mother ship
bool mother_ship_detect_collision(uint32_t row, uint32_t col){
	return false;
}

// Draws the mother ship
void mother_ship_draw(uint32_t row, uint32_t col, uint32_t color){
		int r, c;
		for(r=0;r<MOTHER_SHIP_HEIGHT;r++){				// Go through width
			 for(c=0;c<MOTHER_SHIP_WIDTH;c++){			// and height
				 if((MOTHER_SHIP_16x7[r] & (1<<(MOTHER_SHIP_WIDTH-c-1)))){// and draw ship
					 util_draw_pixel(frame, r+row, c+col, color);
				 }
			 }
		 }

}












